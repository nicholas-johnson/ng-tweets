// Nicholas Johnson (www.nicholasjohnson.com)
// Forward Advance Training (www.forwardadvance.com)
// MIT licence

!function(){function e(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)}var t=function(e){var t,n,a,s,r,l={headers:e.headers,tweets:[]};if(e.body)for(t=angular.element(e.body)[0].getElementsByClassName("tweet"),s=0;s<t.length;s++)n=t[s],a={},a.retweet=n.getElementsByClassName("retweet-credit").length>0,a.id=n.getAttribute("data-tweet-id"),a.html=n.getElementsByClassName("e-entry-title")[0].innerHTML,a.text=n.getElementsByClassName("e-entry-title")[0].innerText,r=n.getElementsByClassName("p-author")[0],a.author={url:r.getElementsByClassName("profile")[0].getAttribute("href"),avatar:r.getElementsByClassName("avatar")[0].getAttribute("src"),fullName:r.getElementsByClassName("p-name")[0].innerText,nickName:r.getElementsByClassName("p-nickname")[0].innerText},a.updated=n.getElementsByClassName("dt-updated")[0].innerText,a.permalink=n.getElementsByClassName("permalink")[0].getAttribute("href"),n.getElementsByClassName("inline-media")[0]&&(a.inlineMedia=n.getElementsByClassName("inline-media")[0].innerHtml),l.tweets.push(a);return l};angular.module("ngTweets",[]).service("tweets",["$http",function(n){var a={get:function(a){var s=["http://cdn.syndication.twimg.com/widgets/timelines/",a.widgetId,"?&lang=",a.lang||"en","&callback=JSON_CALLBACK","&suppress_response_codes=true&rnd=",Math.random()].join("");return n({url:s,method:"JSONP",transformResponse:e(n.defaults.transformResponse,function(e){return t(e)})})}};return a}])}();